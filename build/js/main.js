let obtImage=document.querySelector(".obtengo-container_left__image");function Ant(t){t=document.getElementById(t);this.crslRoot=t||document.querySelector(".ant-carousel"),this.crslList=this.crslRoot.querySelector(".ant-carousel-list"),this.crslElements=this.crslList.querySelectorAll(".ant-carousel-element"),this.crslElemFirst=this.crslList.querySelector(".ant-carousel-element"),this.leftArrow=this.crslRoot.querySelector(".ant-carousel-arrow-left"),this.rightArrow=this.crslRoot.querySelector(".ant-carousel-arrow-right"),this.indicatorDots=this.crslRoot.querySelector(".ant-carousel-dots"),console.log(this.crslRoot),this.options=Ant.defaults,Ant.initialize(this)}window.addEventListener("resize",function(t){window.innerWidth<=575?obtImage.src="./assets/images/obtengo_bg_left_mobile.png":obtImage.src="./assets/images/obtengo_bg_left.png"}),Ant.defaults={elemVisible:2,loop:!0,auto:!0,interval:3e3,speed:750,touch:!0,arrows:!0,dots:!0},Ant.prototype.elemPrev=function(i){if(i=i||1,this.options.dots&&this.dotOn(this.currentElement),this.currentElement-=i,this.currentElement<0&&(this.currentElement=this.dotsVisible-1),this.options.dots&&this.dotOff(this.currentElement),this.options.loop){let e,s,t=this;for(let t=0;t<i;t++)e=this.crslList.lastElementChild,s=e.cloneNode(!0),this.crslList.insertBefore(s,this.crslList.firstElementChild),this.crslList.removeChild(e);this.crslList.style.marginLeft="-"+this.elemWidth*i+"px";window.getComputedStyle(this.crslList).marginLeft;this.crslList.style.cssText="transition:margin "+this.options.speed+"ms ease;",this.crslList.style.marginLeft="0px",setTimeout(function(){t.crslList.style.cssText="transition:none;"},this.options.speed)}else this.currentOffset+=this.elemWidth*i,this.crslList.style.marginLeft=this.currentOffset+"px",0==this.currentElement&&(this.leftArrow.style.display="none",this.touchPrev=!1),this.rightArrow.style.display="block",this.touchNext=!0},Ant.prototype.elemNext=function(o){if(o=o||1,this.options.dots&&this.dotOn(this.currentElement),this.currentElement+=o,this.currentElement>=this.dotsVisible&&(this.currentElement=0),this.options.dots&&this.dotOff(this.currentElement),this.options.loop){let e,s,i=this;this.crslList.style.cssText="transition:margin "+this.options.speed+"ms ease;",this.crslList.style.marginLeft="-"+this.elemWidth*o+"px",setTimeout(function(){i.crslList.style.cssText="transition:none;";for(let t=0;t<o;t++)e=i.crslList.firstElementChild,s=e.cloneNode(!0),i.crslList.appendChild(s),i.crslList.removeChild(e);i.crslList.style.marginLeft="0px"},this.options.speed)}else this.currentOffset-=this.elemWidth*o,this.crslList.style.marginLeft=this.currentOffset+"px",this.currentElement==this.dotsVisible-1&&(this.rightArrow.style.display="none",this.touchNext=!1),this.leftArrow.style.display="block",this.touchPrev=!0},Ant.prototype.dotOn=function(t){this.indicatorDotsAll[t].style.cssText="background-color:#BBB; cursor:pointer;"},Ant.prototype.dotOff=function(t){this.indicatorDotsAll[t].style.cssText="background-color:#FF7100; cursor:default;"},Ant.initialize=function(i){i.elemCount=i.crslElements.length,i.dotsVisible=i.elemCount;var t=window.getComputedStyle(i.crslElemFirst);i.elemWidth=i.crslElemFirst.offsetWidth+parseInt(t.marginLeft)+parseInt(t.marginRight),i.currentElement=0,i.currentOffset=0,i.touchPrev=!0,i.touchNext=!0;let e,s,o,n,r,l,c=h();function h(){return(new Date).getTime()}function a(){i.autoScroll=setInterval(function(){var t=h();t-c+10>i.options.interval&&(c=t,i.elemNext())},i.options.interval)}if(i.elemCount<=i.options.elemVisible&&(i.options.auto=!1,i.options.touch=!1,i.options.arrows=!1,i.options.dots=!1,i.leftArrow.style.display="none",i.rightArrow.style.display="none"),i.options.loop?i.options.auto&&(a(),i.crslList.addEventListener("mouseenter",function(){clearInterval(i.autoScroll)},!1),i.crslList.addEventListener("mouseleave",a,!1)):(i.dotsVisible=i.elemCount-i.options.elemVisible+1,i.leftArrow.style.display="none",i.touchPrev=!1,i.options.auto=!1),i.options.touch&&(i.crslList.addEventListener("touchstart",function(t){e=parseInt(t.touches[0].clientX),s=parseInt(t.touches[0].clientY),r=h()},!1),i.crslList.addEventListener("touchmove",function(t){e&&s&&(o=e-parseInt(t.touches[0].clientX),n=s-parseInt(t.touches[0].clientY),l=h(),15<Math.abs(o)&&Math.abs(o)>Math.abs(n)&&l-r<75&&(r=0,i.touchNext&&0<o?(c=l,i.elemNext()):i.touchPrev&&o<0&&(c=l,i.elemPrev())))},!1)),i.options.arrows?(i.options.loop||(i.crslList.style.cssText="transition:margin "+i.options.speed+"ms ease;"),i.leftArrow.addEventListener("click",function(){var t=h();t-c>i.options.speed&&(c=t,i.elemPrev())},!1),i.rightArrow.addEventListener("click",function(){var t=h();t-c>i.options.speed&&(c=t,i.elemNext())},!1)):(i.leftArrow.style.display="none",i.rightArrow.style.display="none"),i.options.dots){let e="",s;for(let t=0;t<i.dotsVisible;t++)e+='<span class="ant-dot"></span>';i.indicatorDots.innerHTML=e,i.indicatorDotsAll=i.crslRoot.querySelectorAll("span.ant-dot");for(let t=0;t<i.dotsVisible;t++)i.indicatorDotsAll[t].addEventListener("click",function(){s=Math.abs(t-i.currentElement),t<i.currentElement?(c=h(),i.elemPrev(s)):t>i.currentElement&&(c=h(),i.elemNext(s))},!1);i.dotOff(0);for(let t=1;t<i.dotsVisible;t++)i.dotOn(t)}},new Ant;
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsib2J0SW1hZ2UiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJBbnQiLCJjcnNsSWQiLCJpZCIsImdldEVsZW1lbnRCeUlkIiwidGhpcyIsImNyc2xSb290IiwiY3JzbExpc3QiLCJjcnNsRWxlbWVudHMiLCJxdWVyeVNlbGVjdG9yQWxsIiwiY3JzbEVsZW1GaXJzdCIsImxlZnRBcnJvdyIsInJpZ2h0QXJyb3ciLCJpbmRpY2F0b3JEb3RzIiwiY29uc29sZSIsImxvZyIsIm9wdGlvbnMiLCJkZWZhdWx0cyIsImluaXRpYWxpemUiLCJ3aW5kb3ciLCJhZGRFdmVudExpc3RlbmVyIiwiZXZlbnQiLCJpbm5lcldpZHRoIiwic3JjIiwiZWxlbVZpc2libGUiLCJsb29wIiwiYXV0byIsImludGVydmFsIiwic3BlZWQiLCJ0b3VjaCIsImFycm93cyIsImRvdHMiLCJwcm90b3R5cGUiLCJlbGVtUHJldiIsIm51bSIsImRvdE9uIiwiY3VycmVudEVsZW1lbnQiLCJkb3RzVmlzaWJsZSIsImRvdE9mZiIsImVsbSIsImJ1ZiIsInRoaXMkIiwiaSIsImxhc3RFbGVtZW50Q2hpbGQiLCJjbG9uZU5vZGUiLCJpbnNlcnRCZWZvcmUiLCJmaXJzdEVsZW1lbnRDaGlsZCIsInJlbW92ZUNoaWxkIiwic3R5bGUiLCJtYXJnaW5MZWZ0IiwiZWxlbVdpZHRoIiwiZ2V0Q29tcHV0ZWRTdHlsZSIsImNzc1RleHQiLCJzZXRUaW1lb3V0IiwiY3VycmVudE9mZnNldCIsImRpc3BsYXkiLCJ0b3VjaFByZXYiLCJ0b3VjaE5leHQiLCJlbGVtTmV4dCIsImFwcGVuZENoaWxkIiwiaW5kaWNhdG9yRG90c0FsbCIsInRoYXQiLCJlbGVtQ291bnQiLCJsZW5ndGgiLCJlbGVtU3R5bGUiLCJvZmZzZXRXaWR0aCIsInBhcnNlSW50IiwibWFyZ2luUmlnaHQiLCJ4VG91Y2giLCJ5VG91Y2giLCJ4RGlmZiIsInlEaWZmIiwic3RUaW1lIiwibXZUaW1lIiwiYmdUaW1lIiwiZ2V0VGltZSIsIkRhdGUiLCJzZXRBdXRvU2Nyb2xsIiwiYXV0b1Njcm9sbCIsInNldEludGVydmFsIiwiZm5UaW1lIiwiY2xlYXJJbnRlcnZhbCIsImUiLCJ0b3VjaGVzIiwiY2xpZW50WCIsImNsaWVudFkiLCJNYXRoIiwiYWJzIiwic3VtIiwiZGlmZk51bSIsImlubmVySFRNTCIsIm4iXSwibWFwcGluZ3MiOiJBQUFBLElBQUFBLFNBQUFDLFNBQUFDLGNBQUEsa0NBV0EsU0FBQUMsSUFBQUMsR0FFQUMsRUFBQUosU0FBQUssZUFBQUYsR0FFQUcsS0FBQUMsU0FEQUgsR0FHQUosU0FBQUMsY0FBQSxpQkFJQUssS0FBQUUsU0FBQUYsS0FBQUMsU0FBQU4sY0FBQSxzQkFDQUssS0FBQUcsYUFBQUgsS0FBQUUsU0FBQUUsaUJBQUEseUJBQ0FKLEtBQUFLLGNBQUFMLEtBQUFFLFNBQUFQLGNBQUEseUJBQ0FLLEtBQUFNLFVBQUFOLEtBQUFDLFNBQUFOLGNBQUEsNEJBQ0FLLEtBQUFPLFdBQUFQLEtBQUFDLFNBQUFOLGNBQUEsNkJBQ0FLLEtBQUFRLGNBQUFSLEtBQUFDLFNBQUFOLGNBQUEsc0JBQ0FjLFFBQUFDLElBQUFWLEtBQUFDLFVBR0FELEtBQUFXLFFBQUFmLElBQUFnQixTQUNBaEIsSUFBQWlCLFdBQUFiLE1BN0JBYyxPQUFBQyxpQkFBQSxTQUFBLFNBQUFDLEdBQ0FGLE9BQUFHLFlBQUEsSUFDQXhCLFNBQUF5QixJQUFBLDZDQUVBekIsU0FBQXlCLElBQUEsd0NBNEJBdEIsSUFBQWdCLFNBQUEsQ0FHQU8sWUFBQSxFQUNBQyxNQUFBLEVBQ0FDLE1BQUEsRUFDQUMsU0FBQSxJQUNBQyxNQUFBLElBQ0FDLE9BQUEsRUFDQUMsUUFBQSxFQUNBQyxNQUFBLEdBR0E5QixJQUFBK0IsVUFBQUMsU0FBQSxTQUFBQyxHQVFBLEdBUEFBLEVBQUFBLEdBQUEsRUFFQTdCLEtBQUFXLFFBQUFlLE1BQUExQixLQUFBOEIsTUFBQTlCLEtBQUErQixnQkFDQS9CLEtBQUErQixnQkFBQUYsRUFDQTdCLEtBQUErQixlQUFBLElBQUEvQixLQUFBK0IsZUFBQS9CLEtBQUFnQyxZQUFBLEdBQ0FoQyxLQUFBVyxRQUFBZSxNQUFBMUIsS0FBQWlDLE9BQUFqQyxLQUFBK0IsZ0JBRUEvQixLQUFBVyxRQUFBUyxLQVNBLENBQ0EsSUFBQWMsRUFBQUMsRUFBQUMsRUFBQXBDLEtBQ0EsSUFBQSxJQUFBcUMsRUFBQSxFQUFBQSxFQUFBUixFQUFBUSxJQUNBSCxFQUFBbEMsS0FBQUUsU0FBQW9DLGlCQUNBSCxFQUFBRCxFQUFBSyxXQUFBLEdBQ0F2QyxLQUFBRSxTQUFBc0MsYUFBQUwsRUFBQW5DLEtBQUFFLFNBQUF1QyxtQkFDQXpDLEtBQUFFLFNBQUF3QyxZQUFBUixHQUVBbEMsS0FBQUUsU0FBQXlDLE1BQUFDLFdBQUEsSUFBQTVDLEtBQUE2QyxVQUFBaEIsRUFBQSxLQUNBZixPQUFBZ0MsaUJBQUE5QyxLQUFBRSxVQUFBMEMsV0FDQTVDLEtBQUFFLFNBQUF5QyxNQUFBSSxRQUFBLHFCQUFBL0MsS0FBQVcsUUFBQVksTUFBQSxXQUNBdkIsS0FBQUUsU0FBQXlDLE1BQUFDLFdBQUEsTUFDQUksV0FBQSxXQUNBWixFQUFBbEMsU0FBQXlDLE1BQUFJLFFBQUEsb0JBQ0EvQyxLQUFBVyxRQUFBWSxZQXRCQXZCLEtBQUFpRCxlQUFBakQsS0FBQTZDLFVBQUFoQixFQUNBN0IsS0FBQUUsU0FBQXlDLE1BQUFDLFdBQUE1QyxLQUFBaUQsY0FBQSxLQUNBLEdBQUFqRCxLQUFBK0IsaUJBQ0EvQixLQUFBTSxVQUFBcUMsTUFBQU8sUUFBQSxPQUNBbEQsS0FBQW1ELFdBQUEsR0FFQW5ELEtBQUFPLFdBQUFvQyxNQUFBTyxRQUFBLFFBQ0FsRCxLQUFBb0QsV0FBQSxHQW1CQXhELElBQUErQixVQUFBMEIsU0FBQSxTQUFBeEIsR0FRQSxHQVBBQSxFQUFBQSxHQUFBLEVBRUE3QixLQUFBVyxRQUFBZSxNQUFBMUIsS0FBQThCLE1BQUE5QixLQUFBK0IsZ0JBQ0EvQixLQUFBK0IsZ0JBQUFGLEVBQ0E3QixLQUFBK0IsZ0JBQUEvQixLQUFBZ0MsY0FBQWhDLEtBQUErQixlQUFBLEdBQ0EvQixLQUFBVyxRQUFBZSxNQUFBMUIsS0FBQWlDLE9BQUFqQyxLQUFBK0IsZ0JBRUEvQixLQUFBVyxRQUFBUyxLQVNBLENBQ0EsSUFBQWMsRUFBQUMsRUFBQUMsRUFBQXBDLEtBQ0FBLEtBQUFFLFNBQUF5QyxNQUFBSSxRQUFBLHFCQUFBL0MsS0FBQVcsUUFBQVksTUFBQSxXQUNBdkIsS0FBQUUsU0FBQXlDLE1BQUFDLFdBQUEsSUFBQTVDLEtBQUE2QyxVQUFBaEIsRUFBQSxLQUNBbUIsV0FBQSxXQUNBWixFQUFBbEMsU0FBQXlDLE1BQUFJLFFBQUEsbUJBQ0EsSUFBQSxJQUFBVixFQUFBLEVBQUFBLEVBQUFSLEVBQUFRLElBQ0FILEVBQUFFLEVBQUFsQyxTQUFBdUMsa0JBQ0FOLEVBQUFELEVBQUFLLFdBQUEsR0FDQUgsRUFBQWxDLFNBQUFvRCxZQUFBbkIsR0FDQUMsRUFBQWxDLFNBQUF3QyxZQUFBUixHQUVBRSxFQUFBbEMsU0FBQXlDLE1BQUFDLFdBQUEsT0FDQTVDLEtBQUFXLFFBQUFZLFlBckJBdkIsS0FBQWlELGVBQUFqRCxLQUFBNkMsVUFBQWhCLEVBQ0E3QixLQUFBRSxTQUFBeUMsTUFBQUMsV0FBQTVDLEtBQUFpRCxjQUFBLEtBQ0FqRCxLQUFBK0IsZ0JBQUEvQixLQUFBZ0MsWUFBQSxJQUNBaEMsS0FBQU8sV0FBQW9DLE1BQUFPLFFBQUEsT0FDQWxELEtBQUFvRCxXQUFBLEdBRUFwRCxLQUFBTSxVQUFBcUMsTUFBQU8sUUFBQSxRQUNBbEQsS0FBQW1ELFdBQUEsR0FrQkF2RCxJQUFBK0IsVUFBQUcsTUFBQSxTQUFBRCxHQUNBN0IsS0FBQXVELGlCQUFBMUIsR0FBQWMsTUFBQUksUUFBQSwwQ0FHQW5ELElBQUErQixVQUFBTSxPQUFBLFNBQUFKLEdBQ0E3QixLQUFBdUQsaUJBQUExQixHQUFBYyxNQUFBSSxRQUFBLDZDQUdBbkQsSUFBQWlCLFdBQUEsU0FBQTJDLEdBR0FBLEVBQUFDLFVBQUFELEVBQUFyRCxhQUFBdUQsT0FDQUYsRUFBQXhCLFlBQUF3QixFQUFBQyxVQUNBLElBQUFFLEVBQUE3QyxPQUFBZ0MsaUJBQUFVLEVBQUFuRCxlQUNBbUQsRUFBQVgsVUFBQVcsRUFBQW5ELGNBQUF1RCxZQUNBQyxTQUFBRixFQUFBZixZQUFBaUIsU0FBQUYsRUFBQUcsYUFHQU4sRUFBQXpCLGVBQUEsRUFDQXlCLEVBQUFQLGNBQUEsRUFDQU8sRUFBQUwsV0FBQSxFQUNBSyxFQUFBSixXQUFBLEVBQ0EsSUFBQVcsRUFBQUMsRUFBQUMsRUFBQUMsRUFBQUMsRUFBQUMsRUFDQUMsRUFBQUMsSUFHQSxTQUFBQSxJQUNBLE9BQUEsSUFBQUMsTUFBQUQsVUFHQSxTQUFBRSxJQUNBaEIsRUFBQWlCLFdBQUFDLFlBQUEsV0FDQSxJQUFBQyxFQUFBTCxJQUNBSyxFQUFBTixFQUFBLEdBQUFiLEVBQUE3QyxRQUFBVyxXQUNBK0MsRUFBQU0sRUFDQW5CLEVBQUFILGFBRUFHLEVBQUE3QyxRQUFBVyxVQXlFQSxHQXJFQWtDLEVBQUFDLFdBQUFELEVBQUE3QyxRQUFBUSxjQUNBcUMsRUFBQTdDLFFBQUFVLE1BQUEsRUFDQW1DLEVBQUE3QyxRQUFBYSxPQUFBLEVBQ0FnQyxFQUFBN0MsUUFBQWMsUUFBQSxFQUNBK0IsRUFBQTdDLFFBQUFlLE1BQUEsRUFDQThCLEVBQUFsRCxVQUFBcUMsTUFBQU8sUUFBQSxPQUNBTSxFQUFBakQsV0FBQW9DLE1BQUFPLFFBQUEsUUFHQU0sRUFBQTdDLFFBQUFTLEtBS0FvQyxFQUFBN0MsUUFBQVUsT0FDQW1ELElBRUFoQixFQUFBdEQsU0FBQWEsaUJBQUEsYUFBQSxXQUNBNkQsY0FBQXBCLEVBQUFpQixjQUNBLEdBQ0FqQixFQUFBdEQsU0FBQWEsaUJBQUEsYUFBQXlELEdBQUEsS0FWQWhCLEVBQUF4QixZQUFBd0IsRUFBQUMsVUFBQUQsRUFBQTdDLFFBQUFRLFlBQUEsRUFDQXFDLEVBQUFsRCxVQUFBcUMsTUFBQU8sUUFBQSxPQUNBTSxFQUFBTCxXQUFBLEVBQ0FLLEVBQUE3QyxRQUFBVSxNQUFBLEdBVUFtQyxFQUFBN0MsUUFBQWEsUUFDQWdDLEVBQUF0RCxTQUFBYSxpQkFBQSxhQUFBLFNBQUE4RCxHQUNBZCxFQUFBRixTQUFBZ0IsRUFBQUMsUUFBQSxHQUFBQyxTQUNBZixFQUFBSCxTQUFBZ0IsRUFBQUMsUUFBQSxHQUFBRSxTQUNBYixFQUFBRyxNQUNBLEdBQ0FkLEVBQUF0RCxTQUFBYSxpQkFBQSxZQUFBLFNBQUE4RCxHQUNBZCxHQUFBQyxJQUNBQyxFQUFBRixFQUFBRixTQUFBZ0IsRUFBQUMsUUFBQSxHQUFBQyxTQUNBYixFQUFBRixFQUFBSCxTQUFBZ0IsRUFBQUMsUUFBQSxHQUFBRSxTQUNBWixFQUFBRSxJQUNBLEdBQUFXLEtBQUFDLElBQUFqQixJQUFBZ0IsS0FBQUMsSUFBQWpCLEdBQUFnQixLQUFBQyxJQUFBaEIsSUFBQUUsRUFBQUQsRUFBQSxLQUNBQSxFQUFBLEVBQ0FYLEVBQUFKLFdBQUEsRUFBQWEsR0FDQUksRUFBQUQsRUFDQVosRUFBQUgsWUFDQUcsRUFBQUwsV0FBQWMsRUFBQSxJQUNBSSxFQUFBRCxFQUNBWixFQUFBNUIsZ0JBR0EsSUFHQTRCLEVBQUE3QyxRQUFBYyxRQUNBK0IsRUFBQTdDLFFBQUFTLE9BQUFvQyxFQUFBdEQsU0FBQXlDLE1BQUFJLFFBQ0EscUJBQUFTLEVBQUE3QyxRQUFBWSxNQUFBLFlBQ0FpQyxFQUFBbEQsVUFBQVMsaUJBQUEsUUFBQSxXQUNBLElBQUE0RCxFQUFBTCxJQUNBSyxFQUFBTixFQUFBYixFQUFBN0MsUUFBQVksUUFDQThDLEVBQUFNLEVBQ0FuQixFQUFBNUIsY0FFQSxHQUNBNEIsRUFBQWpELFdBQUFRLGlCQUFBLFFBQUEsV0FDQSxJQUFBNEQsRUFBQUwsSUFDQUssRUFBQU4sRUFBQWIsRUFBQTdDLFFBQUFZLFFBQ0E4QyxFQUFBTSxFQUNBbkIsRUFBQUgsY0FFQSxLQUVBRyxFQUFBbEQsVUFBQXFDLE1BQUFPLFFBQUEsT0FDQU0sRUFBQWpELFdBQUFvQyxNQUFBTyxRQUFBLFFBR0FNLEVBQUE3QyxRQUFBZSxLQUFBLENBQ0EsSUFBQXlELEVBQUEsR0FDQUMsRUFDQSxJQUFBLElBQUEvQyxFQUFBLEVBQUFBLEVBQUFtQixFQUFBeEIsWUFBQUssSUFDQThDLEdBQUEsZ0NBRUEzQixFQUFBaEQsY0FBQTZFLFVBQUFGLEVBQ0EzQixFQUFBRCxpQkFBQUMsRUFBQXZELFNBQUFHLGlCQUFBLGdCQUVBLElBQUEsSUFBQWtGLEVBQUEsRUFBQUEsRUFBQTlCLEVBQUF4QixZQUFBc0QsSUFDQTlCLEVBQUFELGlCQUFBK0IsR0FBQXZFLGlCQUFBLFFBQUEsV0FDQXFFLEVBQUFILEtBQUFDLElBQUFJLEVBQUE5QixFQUFBekIsZ0JBQ0F1RCxFQUFBOUIsRUFBQXpCLGdCQUNBc0MsRUFBQUMsSUFDQWQsRUFBQTVCLFNBQUF3RCxJQUNBRSxFQUFBOUIsRUFBQXpCLGlCQUNBc0MsRUFBQUMsSUFDQWQsRUFBQUgsU0FBQStCLE1BR0EsR0FFQTVCLEVBQUF2QixPQUFBLEdBQ0EsSUFBQSxJQUFBSSxFQUFBLEVBQUFBLEVBQUFtQixFQUFBeEIsWUFBQUssSUFDQW1CLEVBQUExQixNQUFBTyxLQUtBLElBQUF6QyIsImZpbGUiOiJtYWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsibGV0IG9idEltYWdlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm9idGVuZ28tY29udGFpbmVyX2xlZnRfX2ltYWdlJyk7XHJcblxyXG53aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgZnVuY3Rpb24oZXZlbnQpIHtcclxuICAgIGlmICh3aW5kb3cuaW5uZXJXaWR0aCA8PSA1NzUpIHtcclxuICAgICAgICBvYnRJbWFnZS5zcmMgPSBcIi4vYXNzZXRzL2ltYWdlcy9vYnRlbmdvX2JnX2xlZnRfbW9iaWxlLnBuZ1wiO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICBvYnRJbWFnZS5zcmMgPSBcIi4vYXNzZXRzL2ltYWdlcy9vYnRlbmdvX2JnX2xlZnQucG5nXCJcclxuICAgIH1cclxufSlcclxuXHJcblxyXG5mdW5jdGlvbiBBbnQoY3JzbElkKSB7XHJcblxyXG4gICAgbGV0IGlkID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoY3JzbElkKTtcclxuICAgIGlmIChpZCkge1xyXG4gICAgICAgIHRoaXMuY3JzbFJvb3QgPSBpZFxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICB0aGlzLmNyc2xSb290ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmFudC1jYXJvdXNlbCcpXHJcbiAgICB9O1xyXG5cclxuICAgIC8vIENhcm91c2VsIG9iamVjdHNcclxuICAgIHRoaXMuY3JzbExpc3QgPSB0aGlzLmNyc2xSb290LnF1ZXJ5U2VsZWN0b3IoJy5hbnQtY2Fyb3VzZWwtbGlzdCcpO1xyXG4gICAgdGhpcy5jcnNsRWxlbWVudHMgPSB0aGlzLmNyc2xMaXN0LnF1ZXJ5U2VsZWN0b3JBbGwoJy5hbnQtY2Fyb3VzZWwtZWxlbWVudCcpO1xyXG4gICAgdGhpcy5jcnNsRWxlbUZpcnN0ID0gdGhpcy5jcnNsTGlzdC5xdWVyeVNlbGVjdG9yKCcuYW50LWNhcm91c2VsLWVsZW1lbnQnKTtcclxuICAgIHRoaXMubGVmdEFycm93ID0gdGhpcy5jcnNsUm9vdC5xdWVyeVNlbGVjdG9yKCcuYW50LWNhcm91c2VsLWFycm93LWxlZnQnKTtcclxuICAgIHRoaXMucmlnaHRBcnJvdyA9IHRoaXMuY3JzbFJvb3QucXVlcnlTZWxlY3RvcignLmFudC1jYXJvdXNlbC1hcnJvdy1yaWdodCcpO1xyXG4gICAgdGhpcy5pbmRpY2F0b3JEb3RzID0gdGhpcy5jcnNsUm9vdC5xdWVyeVNlbGVjdG9yKCcuYW50LWNhcm91c2VsLWRvdHMnKTtcclxuICAgIGNvbnNvbGUubG9nKHRoaXMuY3JzbFJvb3QpO1xyXG5cclxuICAgIC8vIEluaXRpYWxpemF0aW9uXHJcbiAgICB0aGlzLm9wdGlvbnMgPSBBbnQuZGVmYXVsdHM7XHJcbiAgICBBbnQuaW5pdGlhbGl6ZSh0aGlzKVxyXG59O1xyXG5cclxuQW50LmRlZmF1bHRzID0ge1xyXG5cclxuICAgIC8vIERlZmF1bHQgb3B0aW9ucyBmb3IgdGhlIGNhcm91c2VsXHJcbiAgICBlbGVtVmlzaWJsZTogMiwgLy8g0JrQvtC7LdCy0L4g0L7RgtC+0LHRgNCw0LbQsNC10LzRi9GFINGN0LvQtdC80LXQvdGC0L7QsiDQsiDQutCw0YDRg9GB0LXQu9C4XHJcbiAgICBsb29wOiB0cnVlLCAvLyDQkdC10YHQutC+0L3QtdGH0L3QvtC1INC30LDRhtC40LrQu9C40LLQsNC90LjQtSDQutCw0YDRg9GB0LXQu9C4IFxyXG4gICAgYXV0bzogdHJ1ZSwgLy8g0JDQstGC0L7QvNCw0YLQuNGH0LXRgdC60LDRjyDQv9GA0L7QutGA0YPRgtC60LBcclxuICAgIGludGVydmFsOiAzMDAwLCAvLyDQmNC90YLQtdGA0LLQsNC7INC80LXQttC00YMg0L/RgNC+0LrRgNGD0YLQutC+0Lkg0Y3Qu9C10LzQtdC90YLQvtCyICjQvNGBKVxyXG4gICAgc3BlZWQ6IDc1MCwgLy8g0KHQutC+0YDQvtGB0YLRjCDQsNC90LjQvNCw0YbQuNC4ICjQvNGBKVxyXG4gICAgdG91Y2g6IHRydWUsIC8vINCf0YDQvtC60YDRg9GC0LrQsCAg0L/RgNC40LrQvtGB0L3QvtCy0LXQvdC40LXQvFxyXG4gICAgYXJyb3dzOiB0cnVlLCAvLyDQn9GA0L7QutGA0YPRgtC60LAg0YHRgtGA0LXQu9C60LDQvNC4XHJcbiAgICBkb3RzOiB0cnVlIC8vINCY0L3QtNC40LrQsNGC0L7RgNC90YvQtSDRgtC+0YfQutC4XHJcbn07XHJcblxyXG5BbnQucHJvdG90eXBlLmVsZW1QcmV2ID0gZnVuY3Rpb24obnVtKSB7XHJcbiAgICBudW0gPSBudW0gfHwgMTtcclxuXHJcbiAgICBpZiAodGhpcy5vcHRpb25zLmRvdHMpIHRoaXMuZG90T24odGhpcy5jdXJyZW50RWxlbWVudCk7XHJcbiAgICB0aGlzLmN1cnJlbnRFbGVtZW50IC09IG51bTtcclxuICAgIGlmICh0aGlzLmN1cnJlbnRFbGVtZW50IDwgMCkgdGhpcy5jdXJyZW50RWxlbWVudCA9IHRoaXMuZG90c1Zpc2libGUgLSAxO1xyXG4gICAgaWYgKHRoaXMub3B0aW9ucy5kb3RzKSB0aGlzLmRvdE9mZih0aGlzLmN1cnJlbnRFbGVtZW50KTtcclxuXHJcbiAgICBpZiAoIXRoaXMub3B0aW9ucy5sb29wKSB7IC8vINGB0LTQstC40LMg0LLQv9GA0LDQstC+INCx0LXQtyDRhtC40LrQu9CwXHJcbiAgICAgICAgdGhpcy5jdXJyZW50T2Zmc2V0ICs9IHRoaXMuZWxlbVdpZHRoICogbnVtO1xyXG4gICAgICAgIHRoaXMuY3JzbExpc3Quc3R5bGUubWFyZ2luTGVmdCA9IHRoaXMuY3VycmVudE9mZnNldCArICdweCc7XHJcbiAgICAgICAgaWYgKHRoaXMuY3VycmVudEVsZW1lbnQgPT0gMCkge1xyXG4gICAgICAgICAgICB0aGlzLmxlZnRBcnJvdy5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xyXG4gICAgICAgICAgICB0aGlzLnRvdWNoUHJldiA9IGZhbHNlXHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMucmlnaHRBcnJvdy5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcclxuICAgICAgICB0aGlzLnRvdWNoTmV4dCA9IHRydWVcclxuICAgIH0gZWxzZSB7IC8vINGB0LTQstC40LMg0LLQv9GA0LDQstC+INGBINGG0LjQutC70L7QvFxyXG4gICAgICAgIGxldCBlbG0sIGJ1ZiwgdGhpcyQgPSB0aGlzO1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbnVtOyBpKyspIHtcclxuICAgICAgICAgICAgZWxtID0gdGhpcy5jcnNsTGlzdC5sYXN0RWxlbWVudENoaWxkO1xyXG4gICAgICAgICAgICBidWYgPSBlbG0uY2xvbmVOb2RlKHRydWUpO1xyXG4gICAgICAgICAgICB0aGlzLmNyc2xMaXN0Lmluc2VydEJlZm9yZShidWYsIHRoaXMuY3JzbExpc3QuZmlyc3RFbGVtZW50Q2hpbGQpO1xyXG4gICAgICAgICAgICB0aGlzLmNyc2xMaXN0LnJlbW92ZUNoaWxkKGVsbSlcclxuICAgICAgICB9O1xyXG4gICAgICAgIHRoaXMuY3JzbExpc3Quc3R5bGUubWFyZ2luTGVmdCA9ICctJyArIHRoaXMuZWxlbVdpZHRoICogbnVtICsgJ3B4JztcclxuICAgICAgICBsZXQgY29tcFN0eWxlID0gd2luZG93LmdldENvbXB1dGVkU3R5bGUodGhpcy5jcnNsTGlzdCkubWFyZ2luTGVmdDtcclxuICAgICAgICB0aGlzLmNyc2xMaXN0LnN0eWxlLmNzc1RleHQgPSAndHJhbnNpdGlvbjptYXJnaW4gJyArIHRoaXMub3B0aW9ucy5zcGVlZCArICdtcyBlYXNlOyc7XHJcbiAgICAgICAgdGhpcy5jcnNsTGlzdC5zdHlsZS5tYXJnaW5MZWZ0ID0gJzBweCc7XHJcbiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgdGhpcyQuY3JzbExpc3Quc3R5bGUuY3NzVGV4dCA9ICd0cmFuc2l0aW9uOm5vbmU7J1xyXG4gICAgICAgIH0sIHRoaXMub3B0aW9ucy5zcGVlZClcclxuICAgIH1cclxufTtcclxuXHJcbkFudC5wcm90b3R5cGUuZWxlbU5leHQgPSBmdW5jdGlvbihudW0pIHtcclxuICAgIG51bSA9IG51bSB8fCAxO1xyXG5cclxuICAgIGlmICh0aGlzLm9wdGlvbnMuZG90cykgdGhpcy5kb3RPbih0aGlzLmN1cnJlbnRFbGVtZW50KTtcclxuICAgIHRoaXMuY3VycmVudEVsZW1lbnQgKz0gbnVtO1xyXG4gICAgaWYgKHRoaXMuY3VycmVudEVsZW1lbnQgPj0gdGhpcy5kb3RzVmlzaWJsZSkgdGhpcy5jdXJyZW50RWxlbWVudCA9IDA7XHJcbiAgICBpZiAodGhpcy5vcHRpb25zLmRvdHMpIHRoaXMuZG90T2ZmKHRoaXMuY3VycmVudEVsZW1lbnQpO1xyXG5cclxuICAgIGlmICghdGhpcy5vcHRpb25zLmxvb3ApIHsgLy8g0YHQtNCy0LjQsyDQstC70LXQstC+INCx0LXQtyDRhtC40LrQu9CwXHJcbiAgICAgICAgdGhpcy5jdXJyZW50T2Zmc2V0IC09IHRoaXMuZWxlbVdpZHRoICogbnVtO1xyXG4gICAgICAgIHRoaXMuY3JzbExpc3Quc3R5bGUubWFyZ2luTGVmdCA9IHRoaXMuY3VycmVudE9mZnNldCArICdweCc7XHJcbiAgICAgICAgaWYgKHRoaXMuY3VycmVudEVsZW1lbnQgPT0gdGhpcy5kb3RzVmlzaWJsZSAtIDEpIHtcclxuICAgICAgICAgICAgdGhpcy5yaWdodEFycm93LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XHJcbiAgICAgICAgICAgIHRoaXMudG91Y2hOZXh0ID0gZmFsc2VcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5sZWZ0QXJyb3cuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XHJcbiAgICAgICAgdGhpcy50b3VjaFByZXYgPSB0cnVlXHJcbiAgICB9IGVsc2UgeyAvLyDRgdC00LLQuNCzINCy0LvQtdCy0L4g0YEg0YbQuNC60LvQvtC8XHJcbiAgICAgICAgbGV0IGVsbSwgYnVmLCB0aGlzJCA9IHRoaXM7XHJcbiAgICAgICAgdGhpcy5jcnNsTGlzdC5zdHlsZS5jc3NUZXh0ID0gJ3RyYW5zaXRpb246bWFyZ2luICcgKyB0aGlzLm9wdGlvbnMuc3BlZWQgKyAnbXMgZWFzZTsnO1xyXG4gICAgICAgIHRoaXMuY3JzbExpc3Quc3R5bGUubWFyZ2luTGVmdCA9ICctJyArIHRoaXMuZWxlbVdpZHRoICogbnVtICsgJ3B4JztcclxuICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICB0aGlzJC5jcnNsTGlzdC5zdHlsZS5jc3NUZXh0ID0gJ3RyYW5zaXRpb246bm9uZTsnO1xyXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG51bTsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICBlbG0gPSB0aGlzJC5jcnNsTGlzdC5maXJzdEVsZW1lbnRDaGlsZDtcclxuICAgICAgICAgICAgICAgIGJ1ZiA9IGVsbS5jbG9uZU5vZGUodHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzJC5jcnNsTGlzdC5hcHBlbmRDaGlsZChidWYpO1xyXG4gICAgICAgICAgICAgICAgdGhpcyQuY3JzbExpc3QucmVtb3ZlQ2hpbGQoZWxtKVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB0aGlzJC5jcnNsTGlzdC5zdHlsZS5tYXJnaW5MZWZ0ID0gJzBweCdcclxuICAgICAgICB9LCB0aGlzLm9wdGlvbnMuc3BlZWQpXHJcbiAgICB9XHJcbn07XHJcblxyXG5BbnQucHJvdG90eXBlLmRvdE9uID0gZnVuY3Rpb24obnVtKSB7XHJcbiAgICB0aGlzLmluZGljYXRvckRvdHNBbGxbbnVtXS5zdHlsZS5jc3NUZXh0ID0gJ2JhY2tncm91bmQtY29sb3I6I0JCQjsgY3Vyc29yOnBvaW50ZXI7J1xyXG59O1xyXG5cclxuQW50LnByb3RvdHlwZS5kb3RPZmYgPSBmdW5jdGlvbihudW0pIHtcclxuICAgIHRoaXMuaW5kaWNhdG9yRG90c0FsbFtudW1dLnN0eWxlLmNzc1RleHQgPSAnYmFja2dyb3VuZC1jb2xvcjojRkY3MTAwOyBjdXJzb3I6ZGVmYXVsdDsnXHJcbn07XHJcblxyXG5BbnQuaW5pdGlhbGl6ZSA9IGZ1bmN0aW9uKHRoYXQpIHtcclxuXHJcbiAgICAvLyBDb25zdGFudHNcclxuICAgIHRoYXQuZWxlbUNvdW50ID0gdGhhdC5jcnNsRWxlbWVudHMubGVuZ3RoOyAvLyDQmtC+0LvQuNGH0LXRgdGC0LLQviDRjdC70LXQvNC10L3RgtC+0LJcclxuICAgIHRoYXQuZG90c1Zpc2libGUgPSB0aGF0LmVsZW1Db3VudDsgLy8g0KfQuNGB0LvQviDQstC40LTQuNC80YvRhSDRgtC+0YfQtdC6XHJcbiAgICBsZXQgZWxlbVN0eWxlID0gd2luZG93LmdldENvbXB1dGVkU3R5bGUodGhhdC5jcnNsRWxlbUZpcnN0KTtcclxuICAgIHRoYXQuZWxlbVdpZHRoID0gdGhhdC5jcnNsRWxlbUZpcnN0Lm9mZnNldFdpZHRoICsgLy8g0KjQuNGA0LjQvdCwINGN0LvQtdC80LXQvdGC0LAgKNCx0LXQtyBtYXJnaW4pXHJcbiAgICAgICAgcGFyc2VJbnQoZWxlbVN0eWxlLm1hcmdpbkxlZnQpICsgcGFyc2VJbnQoZWxlbVN0eWxlLm1hcmdpblJpZ2h0KTtcclxuXHJcbiAgICAvLyBWYXJpYWJsZXNcclxuICAgIHRoYXQuY3VycmVudEVsZW1lbnQgPSAwO1xyXG4gICAgdGhhdC5jdXJyZW50T2Zmc2V0ID0gMDtcclxuICAgIHRoYXQudG91Y2hQcmV2ID0gdHJ1ZTtcclxuICAgIHRoYXQudG91Y2hOZXh0ID0gdHJ1ZTtcclxuICAgIGxldCB4VG91Y2gsIHlUb3VjaCwgeERpZmYsIHlEaWZmLCBzdFRpbWUsIG12VGltZTtcclxuICAgIGxldCBiZ1RpbWUgPSBnZXRUaW1lKCk7XHJcblxyXG4gICAgLy8gRnVuY3Rpb25zXHJcbiAgICBmdW5jdGlvbiBnZXRUaW1lKCkge1xyXG4gICAgICAgIHJldHVybiBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcclxuICAgIH07XHJcblxyXG4gICAgZnVuY3Rpb24gc2V0QXV0b1Njcm9sbCgpIHtcclxuICAgICAgICB0aGF0LmF1dG9TY3JvbGwgPSBzZXRJbnRlcnZhbChmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgbGV0IGZuVGltZSA9IGdldFRpbWUoKTtcclxuICAgICAgICAgICAgaWYgKGZuVGltZSAtIGJnVGltZSArIDEwID4gdGhhdC5vcHRpb25zLmludGVydmFsKSB7XHJcbiAgICAgICAgICAgICAgICBiZ1RpbWUgPSBmblRpbWU7XHJcbiAgICAgICAgICAgICAgICB0aGF0LmVsZW1OZXh0KClcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sIHRoYXQub3B0aW9ucy5pbnRlcnZhbClcclxuICAgIH07XHJcblxyXG4gICAgLy8gU3RhcnQgaW5pdGlhbGl6YXRpb25cclxuICAgIGlmICh0aGF0LmVsZW1Db3VudCA8PSB0aGF0Lm9wdGlvbnMuZWxlbVZpc2libGUpIHsgLy8g0J7RgtC60LvRjtGH0LjRgtGMINC90LDQstC40LPQsNGG0LjRjlxyXG4gICAgICAgIHRoYXQub3B0aW9ucy5hdXRvID0gZmFsc2U7XHJcbiAgICAgICAgdGhhdC5vcHRpb25zLnRvdWNoID0gZmFsc2U7XHJcbiAgICAgICAgdGhhdC5vcHRpb25zLmFycm93cyA9IGZhbHNlO1xyXG4gICAgICAgIHRoYXQub3B0aW9ucy5kb3RzID0gZmFsc2U7XHJcbiAgICAgICAgdGhhdC5sZWZ0QXJyb3cuc3R5bGUuZGlzcGxheSA9ICdub25lJztcclxuICAgICAgICB0aGF0LnJpZ2h0QXJyb3cuc3R5bGUuZGlzcGxheSA9ICdub25lJ1xyXG4gICAgfTtcclxuXHJcbiAgICBpZiAoIXRoYXQub3B0aW9ucy5sb29wKSB7IC8vINC10YHQu9C4INC90LXRgiDRhtC40LrQu9CwIC0g0YPRgtC+0YfQvdC40YLRjCDQutC+0LvQuNGH0LXRgdGC0LLQviDRgtC+0YfQtdC6XHJcbiAgICAgICAgdGhhdC5kb3RzVmlzaWJsZSA9IHRoYXQuZWxlbUNvdW50IC0gdGhhdC5vcHRpb25zLmVsZW1WaXNpYmxlICsgMTtcclxuICAgICAgICB0aGF0LmxlZnRBcnJvdy5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOyAvLyDQvtGC0LrQu9GO0YfQuNGC0Ywg0LvQtdCy0YPRjiDRgdGC0YDQtdC70LrRg1xyXG4gICAgICAgIHRoYXQudG91Y2hQcmV2ID0gZmFsc2U7IC8vINC+0YLQutC70Y7Rh9C40YLRjCDQv9GA0L7QutGA0YPRgtC60YMg0L/RgNC40LrQvtGB0L3QvtCy0LXQvdC40LXQvCDQstC/0YDQsNCy0L5cclxuICAgICAgICB0aGF0Lm9wdGlvbnMuYXV0byA9IGZhbHNlOyAvLyDQvtGC0LrQu9GO0YfQuNGC0Ywg0LDQstGC0L7Qv9GA0LrRgNGD0YLQutGDXHJcbiAgICB9IGVsc2UgaWYgKHRoYXQub3B0aW9ucy5hdXRvKSB7IC8vINC40L3QuNGG0LjQsNC70LjQt9Cw0YbQuNGPINCw0LLRgtC+0L/RgNC+0LrRgNGD0LrQuFxyXG4gICAgICAgIHNldEF1dG9TY3JvbGwoKTtcclxuICAgICAgICAvLyDQntGB0YLQsNC90L7QstC60LAg0L/RgNC+0LrRgNGD0YLQutC4INC/0YDQuCDQvdCw0LLQtdC00LXQvdC40Lgg0LzRi9GI0Lgg0L3QsCDRjdC70LXQvNC10L3RglxyXG4gICAgICAgIHRoYXQuY3JzbExpc3QuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VlbnRlcicsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICBjbGVhckludGVydmFsKHRoYXQuYXV0b1Njcm9sbClcclxuICAgICAgICB9LCBmYWxzZSk7XHJcbiAgICAgICAgdGhhdC5jcnNsTGlzdC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWxlYXZlJywgc2V0QXV0b1Njcm9sbCwgZmFsc2UpXHJcbiAgICB9O1xyXG5cclxuICAgIGlmICh0aGF0Lm9wdGlvbnMudG91Y2gpIHsgLy8g0LjQvdC40YbQuNCw0LvQuNC30LDRhtC40Y8g0L/RgNC+0LrRgNGD0YLQutC4INC/0YDQuNC60L7RgdC90L7QstC10L3QuNC10LxcclxuICAgICAgICB0aGF0LmNyc2xMaXN0LmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoc3RhcnQnLCBmdW5jdGlvbihlKSB7XHJcbiAgICAgICAgICAgIHhUb3VjaCA9IHBhcnNlSW50KGUudG91Y2hlc1swXS5jbGllbnRYKTtcclxuICAgICAgICAgICAgeVRvdWNoID0gcGFyc2VJbnQoZS50b3VjaGVzWzBdLmNsaWVudFkpO1xyXG4gICAgICAgICAgICBzdFRpbWUgPSBnZXRUaW1lKClcclxuICAgICAgICB9LCBmYWxzZSk7XHJcbiAgICAgICAgdGhhdC5jcnNsTGlzdC5hZGRFdmVudExpc3RlbmVyKCd0b3VjaG1vdmUnLCBmdW5jdGlvbihlKSB7XHJcbiAgICAgICAgICAgIGlmICgheFRvdWNoIHx8ICF5VG91Y2gpIHJldHVybjtcclxuICAgICAgICAgICAgeERpZmYgPSB4VG91Y2ggLSBwYXJzZUludChlLnRvdWNoZXNbMF0uY2xpZW50WCk7XHJcbiAgICAgICAgICAgIHlEaWZmID0geVRvdWNoIC0gcGFyc2VJbnQoZS50b3VjaGVzWzBdLmNsaWVudFkpO1xyXG4gICAgICAgICAgICBtdlRpbWUgPSBnZXRUaW1lKCk7XHJcbiAgICAgICAgICAgIGlmIChNYXRoLmFicyh4RGlmZikgPiAxNSAmJiBNYXRoLmFicyh4RGlmZikgPiBNYXRoLmFicyh5RGlmZikgJiYgbXZUaW1lIC0gc3RUaW1lIDwgNzUpIHtcclxuICAgICAgICAgICAgICAgIHN0VGltZSA9IDA7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhhdC50b3VjaE5leHQgJiYgeERpZmYgPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYmdUaW1lID0gbXZUaW1lO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoYXQuZWxlbU5leHQoKVxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0aGF0LnRvdWNoUHJldiAmJiB4RGlmZiA8IDApIHtcclxuICAgICAgICAgICAgICAgICAgICBiZ1RpbWUgPSBtdlRpbWU7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhhdC5lbGVtUHJldigpXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LCBmYWxzZSlcclxuICAgIH07XHJcblxyXG4gICAgaWYgKHRoYXQub3B0aW9ucy5hcnJvd3MpIHsgLy8g0LjQvdC40YbQuNCw0LvQuNC30LDRhtC40Y8g0YHRgtGA0LXQu9C+0LpcclxuICAgICAgICBpZiAoIXRoYXQub3B0aW9ucy5sb29wKSB0aGF0LmNyc2xMaXN0LnN0eWxlLmNzc1RleHQgPVxyXG4gICAgICAgICAgICAndHJhbnNpdGlvbjptYXJnaW4gJyArIHRoYXQub3B0aW9ucy5zcGVlZCArICdtcyBlYXNlOyc7XHJcbiAgICAgICAgdGhhdC5sZWZ0QXJyb3cuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgbGV0IGZuVGltZSA9IGdldFRpbWUoKTtcclxuICAgICAgICAgICAgaWYgKGZuVGltZSAtIGJnVGltZSA+IHRoYXQub3B0aW9ucy5zcGVlZCkge1xyXG4gICAgICAgICAgICAgICAgYmdUaW1lID0gZm5UaW1lO1xyXG4gICAgICAgICAgICAgICAgdGhhdC5lbGVtUHJldigpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LCBmYWxzZSk7XHJcbiAgICAgICAgdGhhdC5yaWdodEFycm93LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIGxldCBmblRpbWUgPSBnZXRUaW1lKCk7XHJcbiAgICAgICAgICAgIGlmIChmblRpbWUgLSBiZ1RpbWUgPiB0aGF0Lm9wdGlvbnMuc3BlZWQpIHtcclxuICAgICAgICAgICAgICAgIGJnVGltZSA9IGZuVGltZTtcclxuICAgICAgICAgICAgICAgIHRoYXQuZWxlbU5leHQoKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSwgZmFsc2UpXHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIHRoYXQubGVmdEFycm93LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XHJcbiAgICAgICAgdGhhdC5yaWdodEFycm93LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSdcclxuICAgIH07XHJcblxyXG4gICAgaWYgKHRoYXQub3B0aW9ucy5kb3RzKSB7IC8vINC40L3QuNGG0LjQsNC70LjQt9Cw0YbQuNGPINC40L3QtNC40LrQsNGC0L7RgNC90YvRhSDRgtC+0YfQtdC6XHJcbiAgICAgICAgbGV0IHN1bSA9ICcnLFxyXG4gICAgICAgICAgICBkaWZmTnVtO1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhhdC5kb3RzVmlzaWJsZTsgaSsrKSB7XHJcbiAgICAgICAgICAgIHN1bSArPSAnPHNwYW4gY2xhc3M9XCJhbnQtZG90XCI+PC9zcGFuPidcclxuICAgICAgICB9O1xyXG4gICAgICAgIHRoYXQuaW5kaWNhdG9yRG90cy5pbm5lckhUTUwgPSBzdW07XHJcbiAgICAgICAgdGhhdC5pbmRpY2F0b3JEb3RzQWxsID0gdGhhdC5jcnNsUm9vdC5xdWVyeVNlbGVjdG9yQWxsKCdzcGFuLmFudC1kb3QnKTtcclxuICAgICAgICAvLyDQndCw0LfQvdCw0YfQsNC10Lwg0YLQvtGH0LrQsNC8INC+0LHRgNCw0LHQvtGC0YfQuNC6INGB0L7QsdGL0YLQuNGPICdjbGljaydcclxuICAgICAgICBmb3IgKGxldCBuID0gMDsgbiA8IHRoYXQuZG90c1Zpc2libGU7IG4rKykge1xyXG4gICAgICAgICAgICB0aGF0LmluZGljYXRvckRvdHNBbGxbbl0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgIGRpZmZOdW0gPSBNYXRoLmFicyhuIC0gdGhhdC5jdXJyZW50RWxlbWVudCk7XHJcbiAgICAgICAgICAgICAgICBpZiAobiA8IHRoYXQuY3VycmVudEVsZW1lbnQpIHtcclxuICAgICAgICAgICAgICAgICAgICBiZ1RpbWUgPSBnZXRUaW1lKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhhdC5lbGVtUHJldihkaWZmTnVtKVxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChuID4gdGhhdC5jdXJyZW50RWxlbWVudCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGJnVGltZSA9IGdldFRpbWUoKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGF0LmVsZW1OZXh0KGRpZmZOdW0pXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAvLyDQldGB0LvQuCBuID09IHRoYXQuY3VycmVudEVsZW1lbnQg0L3QuNGH0LXQs9C+INC90LUg0LTQtdC70LDQtdC8XHJcbiAgICAgICAgICAgIH0sIGZhbHNlKVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgdGhhdC5kb3RPZmYoMCk7IC8vINGC0L7Rh9C60LBbMF0g0LLRi9C60LvRjtGH0LXQvdCwLCDQvtGB0YLQsNC70YzQvdGL0LUg0LLQutC70Y7Rh9C10L3Ri1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAxOyBpIDwgdGhhdC5kb3RzVmlzaWJsZTsgaSsrKSB7XHJcbiAgICAgICAgICAgIHRoYXQuZG90T24oaSlcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn07XHJcblxyXG5uZXcgQW50KCk7Il19
